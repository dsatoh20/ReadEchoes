{% extends 'base.html' %}
{% block title %}Post{% endblock %}

{% block header %}Post{% endblock %}
{% block content %}
<div class="container-fluid shadow mt-3 p-3 my-mw">
    <h4>Create a new record</h4>
    <form method="post" action="{% url 'records:post' %}" class="mt-3 needs-validation" novalidate>
        {% csrf_token %}
        <div class="mt-3">
            <div class="input-group">
                <label class="input-group-text">Info medium*</label>
                {{form.info_medium}}
                <div class="invalid-feedback">{{form.info_medium.errors}}</div>
            </div>
        </div>
        <div class="mt-3">If selected Book or Movie, type its <b>title</b> and <b>author(director) name</b> correctly, and you'll automatically get its summary and front cover.</div>
        <div class="mt-1">(Recommended: browse <a href="https://books.google.com/" target="_blank" rel="noopener">Google Books</a> / <a href="https://www.themoviedb.org/" target="_blank" rel="noopener">TMDB</a> and copy&paste its title.)</div>
        
        <div class="row mt-3 gy-2 gx-3 align-items-center">  
            <div class="col input-group">
                <label class="input-group-text">Title*</label>
                {{form.title}}
                <div class="invalid-feedback">{{from.title.errors}}</div>
            </div>
            <div class="col input-group">
                <label class="input-group-text">Author</label>
                {{form.first_author}}
                <div class="invalid-feedback">{{from.first_author.errors}}</div>
            </div>
        </div>
        <div class="row mt-3 gy-2 gx-3 align-items-center">
            <div class="col input-group">
                <label class="input-group-text">Publication Year</label>
                {{form.pub_year}}
                <div class="invalid-feedback">{{form.pub_year.errors}}</div>
            </div>
            <div class="col input-group">
                <label class="input-group-text">URL</label>
                {{form.link}}
                <div class="invalid-feedback">{{form.pub_year.errors}}</div>
            </div>
        </div>
        <div class="mt-3">
            <div class="form-check">
                {{form.completed}}
                <label class="form-check-label" for="flexCheckDefault">
                  Read to the end
                </label>
                <div class="invalid-feedback">{{form.completed.errors}}</div>
            </div>
        </div>
        <div class="mt-3">
            <label class="form-label">Score*</label>
            {{form.score}}
        </div>
        <div class="mt-3 form-floating">
            {{form.summary}}
            <label class="floatingTextarea">Summary</label>
            <div class="invalid-feedback">{{from.summary.errors}}</div>
        </div>
        <div class="mt-3 form-floating">
            {{form.report}}
            <label class="floatingTextarea">View*</label>
            <div class="invalid-feedback">{{form.report.errors}}</div>
        </div>
        <div class="d-flex mt-3">
            <div class="input-group">
                <label class="input-group-text">Team*</label>
                {{form.team}}
                <div class="invalid-feedback">{{form.team.errors}}</div>
            </div>
            <input type="submit" value="Post" class="btn btn-success ms-2">
        </div>
    </form>    
</div>
<script>
    (() => {
        'use strict'
      
        // Fetch all the forms we want to apply custom Bootstrap validation styles to
        const forms = document.querySelectorAll('.needs-validation')
      
        // Loop over them and prevent submission
        Array.from(forms).forEach(form => {
          form.addEventListener('submit', event => {
            if (!form.checkValidity()) {
              event.preventDefault()
              event.stopPropagation()
            }
      
            form.classList.add('was-validated')
          }, false)
        })
      })()
</script>
{% endblock %}