{% extends 'base.html' %}
{% block title %}Edit{% endblock %}

{% block header %}Edit{% endblock %}
{% block content %}
<div class="container-fluid mt-3 p-3 my-mw">
    <form method="post" action="{% url 'records:edit' item.id %}" class="mt-3 needs-validation" novalidate>
        {% csrf_token %}
        <div class="mt-3">
            <div class="input-group">
                <label class="input-group-text">Info medium*</label>
                {{form.info_medium}}
                <div class="invalid-feedback">{{form.info_medium.errors}}</div>
            </div>
        </div>
        <div class="row mt-1 gy-2 gx-3 align-items-center">
            <div class="col input-group">
                <label class="input-group-text">Title</label>
                {{form.title}}
                <div class="invalid-feedback">{{from.title.errors}}</div>
            </div>
            <div class="col input-group">
                <label class="input-group-text">Author</label>
                {{form.first_author}}
                <div class="invalid-feedback">{{from.first_author.errors}}</div>
            </div>
        </div>
        <div class="row mt-3 gy-2 gx-3 align-items-center">
            <div class="col input-group">
                <label class="input-group-text">Publication Year</label>
                {{form.pub_year}}
                <div class="invalid-feedback">{{form.pub_year.errors}}</div>
            </div>
            <div class="col input-group">
                <label class="input-group-text">URL</label>
                {{form.link}}
                <div class="invalid-feedback">{{form.pub_year.errors}}</div>
            </div>
        </div>
        <div class="mt-3">
            <div class="form-check">
                {{form.completed}}
                <label class="form-check-label" for="flexCheckDefault">
                  Read to the end
                </label>
                <div class="invalid-feedback">{{form.completed.errors}}</div>
            </div>
        </div>
        <div class="mt-3">
            <label class="form-label">Score</label>
            {{form.score}}
        </div>
        <div class="mt-3 form-floating">
            {{form.summary}}
            <label class="floatingTextarea">Summary</label>
            <div class="invalid-feedback">{{from.summary.errors}}</div>
        </div>
        <div class="mt-3 form-floating">
            {{form.report}}
            <label class="floatingTextarea">View</label>
            <div class="invalid-feedback">{{from.report.errors}}</div>
        </div>
        <div class="d-flex mt-3">
            <div class="input-group">
                <label class="input-group-text">Team</label>
                {{form.team}}
                <div class="invalid-feedback">{{form.team.errors}}</div>
            </div>
            <input type="submit" value="Post" class="btn btn-success ms-2">
        </div>
    </form>    
    <div class="d-flex justify-content-center mt-3">
        <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#exampleModal">Delete</button>        
    </div>
    <!-- Button trigger modal -->

    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
        <div class="modal-header">
            <h1 class="modal-title fs-5" id="exampleModalLabel">Warning</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <p>Are you sure you want to delete this record?</p>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <a href="{% url 'records:delete' item.id %}"><button type="button" class="btn btn-danger">Delete</button></a>
        </div>
        </div>
    </div>
    </div>
</div>
<script>
    (() => {
        'use strict'
      
        // Fetch all the forms we want to apply custom Bootstrap validation styles to
        const forms = document.querySelectorAll('.needs-validation')
      
        // Loop over them and prevent submission
        Array.from(forms).forEach(form => {
          form.addEventListener('submit', event => {
            if (!form.checkValidity()) {
              event.preventDefault()
              event.stopPropagation()
            }
      
            form.classList.add('was-validated')
          }, false)
        })
      })()
</script>
{% endblock %}